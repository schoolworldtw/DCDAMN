# DCDAMN

全名：DisCord Decentralized Admin Moderation Network protocol，此文件旨在敘述此協定的緣起、目標、預計功能與實現方式，至於程式碼總有一天會自己出現的ヾ(≧▽≦\*)o

## 緣起

靈感來源自由dctw的雲端黑名單：
```txt
即日起， [name] 的 [OBJ] 已被雲端黑名單進行收錄，預估同步至其他合作機器人單位尚須一天。
| [time]【- 安全系統 -】: 已成功在伺服器 ([server]) 停權黑名單成員 ([id])
```
必須承認，這種系統自有他的好用之處，但除開這種中心化、由上而下的停權系統可能會造成：
1. 採用這種系統的伺服器被動接受而失去自主性 (當然你可以直接關閉，但真的有問題的人又無法防範了)
2. 私人恩怨演化成服際徹底封殺
3. 需要開發者自行人工審核

## 目標

1. 以類區塊鏈概念自動化各類管理動作 (停權、禁言、警告)
2. 開放所有網絡中的伺服器皆可申請服際管理操作
3. 以客觀數據評估各伺服器管理品質，作為衡量伺服器的一個指標

## 預計功能與實現方式

### 串聯網絡

- 開放申請母伺服器與子伺服器連接，免除多分群人工重複、不同步管理操作

### DCDAMN網絡

- 建構一個多服同步系統，介面可為一個僅有管理員權限才能檢視的頻道 (#網絡管理介面)
- 所有網絡內的伺服器皆可使用指令或在該頻道以特定格式上傳該伺服器的管理操作及證據，稱為判例
  - 指令：`id`、`操作`、`時長`、`原因`、`msg id`、`upload`
	1. `id`：至少一個接受處分的使用者 id，綁 id 保證退出或新加入也會被懲罰
	2. `操作`：管理操作，如警告、禁言、停權
	3. `時長`：前述操作的時間長度，如`7d`、`10m`、`6h`或永久`-1`
	4. `原因`：
	5. `msg id`：違反規則的訊息，將會由機器人以訊息 id 製作檢舉截圖同步到網絡其他成員
	6. `upload`：要不要上傳至網絡。對於觸犯伺服器特定規則的案例，可以用這個參數僅在自己伺服器串聯網絡內操作
- 判例上傳到網絡後會發生以下事情：
	1. 隸屬上傳伺服器的串聯網絡：直接實行該管理操作，發送公告到指定頻道
	2. 其他網絡成員：證據被嵌入訊息並發送到 #網絡管理介面
	  - 管理員可以進行簡單相對多數決決定是否要採納這個判例
	  - 可以申請網絡通用投票：讓管理多伺服器的人每個判例只要投票一次
	3. 採納的判例：實行該管理操作，發送公告到指定頻道
	4. 不採納的判例：可以提供不採納原因，直接發送到上傳伺服器並記錄到網絡上
	5. 經過數天後網絡的數據會被統計，記錄到管理品質評分系統內，所有資訊以 webhook 記錄到各大伺服器避免開發者竄改

#### 網絡警告系統

- 一般違規警告：會以伺服器人數作為權重在網絡中投票，整個網絡相對多數決決定採納與否
  - 整個網絡警告若超過3次自動禁言1周，每多一次加倍，超過5次自動加入網絡停權名單
- 小帳標記警告：網絡也可以上傳某帳號之確認小帳，操作類似警告追認方式
- 盜帳警告：由機器人自動偵測，若偵測到可能被盜帳**整個網絡**自動拔除管理員、無限期禁言、增加暱稱前綴`[被盜帳]`。 並以私訊通知，必須要回覆特定的文字並完成驗證才能解除。

### 管理品質評分

- 每則判例會依照網絡接受率(僅採納成員數夠大且有多位管理員的伺服器)被分成三類：正確、有爭議、錯誤
1. 根據伺服器上傳網絡所提出之判例受到的評分
  - 可以計算出伺服器的平均上傳品質
  - 越高代表越能提供公平公正的管理處分
2. 根據伺服器拒絕正確判例的比例
  - 可以評估伺服器的公正性
  - 越高代表越不公正
3. 根據伺服器管理員投票的時長以及投票率
  - 可以計算管理員的參與率
  - 越高代表越盡責

## 其他資訊

- 這為更大機器人計畫其中之一部份，但任何機器人皆可採用本協定的概念加以實作。
- 若有機器人開發者成功實作，歡迎把你的資料庫結構及/或代碼貢獻到此源庫。

*本協定由 Farmertree8 提出，並特別感謝校際成員之鼓勵*